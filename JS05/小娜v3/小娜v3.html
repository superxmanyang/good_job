<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>

  <body></body>
  <script>
    // 把小娜也看成对象
    /*
    分析小娜的特征和行为
      特征：
  
      行为：
        询问
        退出 - 没法写到小娜的行为里面来
        计算总和
        显示日期
        讲笑话
        蒙
  */
    // 先给一个构造函数，到时候new一个小娜，每次在循环里面指挥小娜做事情
    /*
    面向对象开发的过程：
      1.先封装好所有的对象
      2.找对象
      3.在合适的地方指挥对象去做事情 调用对象的方法或者属性
  */

    function XiaoNa() {
      // 请求
      this.ask = function() {
        var msg = prompt(
          "请输入一下的数字或者关键字\n输入1或者总和，可以求总和\n输入2或者时间，可以得到现在的时间\n输入3或者笑话，可以讲笑话，\n输入q退出"
        );
        return msg;
      };

      // 计算
      this.cal = function() {
        var numbers = prompt(
          "请输入你要求和的数字，以逗号隔开，例如：1，2，3，4"
        );

        var arr = numbers.split(",");

        console.log(arr);
        var sum = 0;

        for (var i = 0; i < arr.length; i++) {
          sum += parseInt(arr[i]);
        }
        alert(sum);
        console.log(sum);
        return sum;
      };

      // 时间
      this.time = function() {
        function patchZero(number) {
          if (number < 0) {
            number = number + "0";
          }
          return number;
        }

        function formdata() {
          var date = new Date();

          var year = date.getFullYear();
          var month = date.getMonth() + 1; // 因为getMonth得到的是0-11之间的数字
          var day = date.getDate();
          var hour = date.getHours();
          var minute = date.getMinutes();
          var second = date.getSeconds();

          month = patchZero(month);
          day = patchZero(day);
          hour = patchZero(hour);
          minute = patchZero(minute);
          second = patchZero(second);
          var time =
            year +
            "-" +
            month +
            "-" +
            day +
            " " +
            hour +
            ":" +
            minute +
            ":" +
            second;

          //好像可以不用这里
          return time;
          alert(time);
        }
        formdata();
      };

      this.joke = function() {
        var joke = ["笑话1", "笑话2", "笑话3", "笑话4"];

        var random = Math.floor(Math.random() * joke.length);

        alert(joke[random]);
      };
    }

    // 创建一个小娜的对象
    var xiaona = new XiaoNa();

    while (true) {
      var msg = xiaona.ask();

      if (msg === "q") {
        alert("cuowu");
        break;
      }
      switch (msg) {
        case "1":
        case "总和":
          xiaona.cal();
          break;

        case "2":
        case "时间":
          xiaona.time();
          break;

        case "3":
        case "笑话":
          xiaona.joke();
          break;

        default:
          alert("您的话小娜没有听懂，请重新说一次");
          break;
      }
    }
  </script>
</html>
